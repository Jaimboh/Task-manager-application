<!DOCTYPE html>
<html lang="en">
<%- include('../partials/_head.ejs') %>
<body>
<%- include('../partials/_header.ejs') %>
<main role="main" class="container mt-4">
  <h1><%= task ? 'Edit Task' : 'Add New Task' %></h1>
  <form action="<%= task ? '/tasks/update/' + task._id : '/tasks' %>" method="POST">
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" id="title" name="title" value="<%= task ? task.title : '' %>" required>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea class="form-control" id="description" name="description"><%= task ? task.description : '' %></textarea>
    </div>
    <!-- Add more fields for category, priority, dueDate, etc. -->
    <div class="form-group">
      <label for="category">Category</label>
      <select class="form-control" id="category" name="category" required>
        <option value="work" <%= task && task.category === 'work' ? 'selected' : '' %>>Work</option>
        <option value="personal" <%= task && task.category === 'personal' ? 'selected' : '' %>>Personal</option>
        <option value="health" <%= task && task.category === 'health' ? 'selected' : '' %>>Health</option>
      </select>
    </div>
    <div class="form-group">
      <label for="priority">Priority</label>
      <select class="form-control" id="priority" name="priority" required>
        <option value="high" <%= task && task.priority === 'high' ? 'selected' : '' %>>High</option>
        <option value="medium" <%= task && task.priority === 'medium' ? 'selected' : '' %>>Medium</option>
        <option value="low" <%= task && task.priority === 'low' ? 'selected' : '' %>>Low</option>
      </select>
    </div>
    <div class="form-group">
      <label for="dueDate">Due Date</label>
      <input type="date" class="form-control" id="dueDate" name="dueDate" value="<%= task && task.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '' %>">
    </div>
    <button type="submit" class="btn btn-primary"><%= task ? 'Update' : 'Submit' %></button>
  </form>
</main>
<%- include('../partials/_footer.ejs') %>
<script src="/js/main.js"></script>
</body>
</html>